[
  {
    "path": "posts/welcome/",
    "title": "Welcome to R for Data Science and Analysis",
    "description": "Welcome to our new blog, R for Data Science and Analysis. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Tang Yue",
        "url": {}
      }
    ],
    "date": "2021-07-14",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-07-14T11:34:38+08:00",
    "input_file": "welcome.knit.md"
  },
  {
    "path": "posts/2021-07-14-the-sharpe-ratio/",
    "title": "VAST Challenge 2021 - Mini-Challenge 3 ",
    "description": "Using Visual Analytics to Support Decision Making to Solve The kronos Incident.",
    "author": [
      {
        "name": "Tang Yue",
        "url": {}
      }
    ],
    "date": "2021-07-14",
    "categories": [],
    "contents": "\r\n1. Overview\r\nThe 2021 Visual Analytics Science and Technology (VAST) Challenge presented researchers with a single fictitious scenario: the disappearance of staff members of the GASTech oil and gas company on location on the island of Kronos. A group named the Protectors of Kronos (POK) was the prime suspect in the disappearance. Three mini-challenges and a grand challenge were offered. For more information, please see VAST Challenge 2021.\r\nThis module will research Mini-Challenge 3 which includes multiple types of text data for participants to feature real-time streaming social media and emergency service data for participants to provide hostage and kidnapper information.This challenge has 3 tasks and questions and asked the participants to integrate results to evaluate the changing levels of risk to the public and recommend actions.\r\n2. Data preparation and Exploration\r\n2.1 Data Source\r\nThere are three dataset provides in Mini-Challenge 3 :\r\nMicroblog records that have been identified by automated filters as being potentially relevant to the ongoing incident\r\nText transcripts of emergency dispatches by the Abila, Kronos local police and fire departments.\r\nmaps of Abila and background documents.\r\n\r\nThe data of Microblog and text transcripts of emergency dispatches are found in three segments:\r\nSegment 1 :“csv-1700-1830.csv” - covers the time period from 1700 to 1830 Abila time on January 23.\r\nSegment 2: \"csv-1831-2000.csv’- covers the time period from 1830 to 2000 Abila time on January 23.\r\nSegment 3: “csv-2001-2131.csv” - covers the time period from 2000 to shortly after 2130 Abila time on January 23.\r\n\r\n2.2 Install and load R package\r\nIn this module, the tidyverse, ggforce, GGally, plotly R and parcoords packages will be used, which could be seen from below code chunk.\r\n\r\n\r\npackages = c('tidyverse','dplyr','widyr','readr','tm','lubridate',\r\n'wordcloud','SnowballC', 'UpSetR','ggplot2','ggwordcloud',\r\n'topicmodels','stringr','clock', 'tidytext','tokenizers',\r\n'igraph','ggraph','DT')\r\nfor (p in packages){\r\n  if(!require(p, character.only = T)){\r\n  install.packages(p)\r\n  }\r\n  library(p,character.only = T)\r\n}\r\n\r\n\r\n\r\n2.3 Import dataset and combine data\r\nThe data of Microblog records and emergency calls are stored in separate csv files. And three csv files share same columns but data generate from different date, which is shown below.\r\n\r\nFirstly, we need to combine 3 files into one consolidated file, which is necessary for the following analysis. In this step, package tidyverse would be used.The following R code shows the process of data consolidation, then three datasets with different date have been integrated into one file.\r\n\r\n\r\nlibrary(tidyverse)\r\ntable1 <- read.csv(\"csv-1700-1830.csv\")\r\ntable2 <- read.csv(\"csv-1831-2000.csv\")\r\ntable3 <- read.csv(\"csv-2001-2131.csv\")\r\ndata <- rbind(table1, table2,table3)\r\n\r\n\r\n\r\n2.4 Modifying Date format\r\nconverting character objects to dates can be made easier by using the lubridate package, which would be used to convert date type from ‘yyyymmddhhmmss’ to ‘yyyy-mm-dd hh:mm:ss’, and create a new column ‘date’ in data, and the code chunk could be seen below.\r\n\r\n\r\ndata$date.yyyyMMddHHmmss. <- ymd_hms(data$date.yyyyMMddHHmmss.)\r\n\r\n\r\n\r\nRename “date.yyyyMMddHHmmss.” in data into “date” with concise format.\r\n\r\n\r\nnames(data)[names(data) == \"date.yyyyMMddHHmmss.\"] <- \"date\"\r\n\r\n\r\n\r\n2.5 Remove Special Chacaters\r\nIn this step, we would like to use package stringr to clean special characters, including \" @, < , ˜ \" and none English words.\r\n\r\n\r\n#data$message <- str_replace_all(data$message,fixed(\"@\"),\"\")\r\ndata$message <- str_replace_all(data$message,fixed(\"<\"),\"\")\r\ndata$message <- str_replace_all(data$message,fixed(\"˜\"),\"\")\r\ndata$message <- str_replace_all(data$message,fixed(\"[\\u4e00-\\u9fa5]+\"), \"\")\r\n#data$message <- str_replace_all(data$message,fixed(\"RT @.+ \"),\"\")\r\n\r\n\r\n\r\nBesides, there are a lot of repeat records which forward from other publisher that begin with “RT”. The repeat records represent one review or voice, so we remove repeat records.\r\n\r\n\r\n#data <- data[- grep(\"RT @\", data$message),]\r\n\r\n\r\n\r\nFor convenience of further analysis, we separate ‘ccdata’ and ‘mbdata’ from “data”, they respectively represent microblog record and emergency call center data collected by the Abila, Kronos local police and fire departments.\r\n\r\n\r\nccdata <- subset(data, type == \"ccdata\")\r\nmbdata <- subset(data, type == \"mbdata\")\r\n\r\n\r\n\r\n2.6 Classify Record\r\nBased on content of data provided, we classified records into three segments, Junk, Typical_Chatter and Meaningful records, using stringr, dplyrpackage. Because emergency call center data is credible and reliable, here we just classify Microblog data into three classes.\r\nClass\r\nDefinition\r\nJunk\r\nreferred to advertisements or financial purpose reports.\r\nMeaningful\r\nrefers to informative records which spread real news about ongoing or impending events happen in Aliba.\r\nTypical Chatter\r\nrepresents no meaningful and irrelevant or inappropriate messages post online.\r\nclassify Junk records: The str_detect() function is used to detect patterns of Junk records. And the below code chunk is used to identify the junk reports.|\r\n\r\n\r\njunk <- mbdata %>% filter_at(.vars = vars(message, author), \r\nany_vars(str_detect(., pattern = \"#artists|#badcreadit|#cars\r\n  |#followme|#nobank|#meds|#cancer|#bestfood|#Grammar|cars.kronos\r\n  |#workAtHome|#gettingFired|#pharmacyripoff|#iThing|sellstuff\r\n  |homeworkers.kronos|#abilasFinest|#hungry|Easy make.money|Officia1AbilaPost|\r\n  visit this|#eastAbila link|#abilajobs|clickhere|#abilajobs|\r\n  #welksFurniture|#swat|#bugs|visit this link|this site|\r\n  junkman|carjunkers|eazymoney|junk99902|junkieduck113\r\n  |junkman377|junkman995|KronosQuoth|Clevvah4Evah\")))\r\n\r\n\r\n\r\n\r\n\r\nmbdata1 <- anti_join(mbdata,junk,by=\"message\") \r\n\r\n\r\n\r\nClassify Spam records: Using the same way, we detect Spam records by below code chunk and classify corresponding emails into Spam class.\r\n\r\n\r\nmeaningful<- mbdata1 %>% filter_at(.vars = vars(message, author), \r\nany_vars(str_detect(., pattern =\"#gowaway|#POKrally|van|gun|fire\r\n|rally|shooting|#AlibaPost|#CentralBulletin|\r\n#POKRallyinthePark|#IntNews|#nopeace|#IntNews|#KronosStar|#stuck|\r\n#Gastech employees|#POK connection|#Abila|#abilafire|#POK| #NewsOnline\r\n|#hurtfirefighte|#rally|#pokrally|#SavePeople\r\n|#terrorists|#tellme| #praying|@carlyscoffee|@dancingdolphin|\r\nterorrist|cop|#abilawatcher|#IntNews|#KronosStar|#gettingFired\r\n|#GelatoGalore|#helpu|#HI|#newsOnline|#DancingDolphinFire|\r\n#jerkdrivers|#stopby|#standoff|#abilaFire|#hurtfirefighter\r\n|#norest|#firstresponders|#IntNews|#AFDHeroes|#APD|#shooting\r\n|#kidnapping|#troubleatgelato|#Abila|#burnabila|#hostage|\r\n#repent|#dansingdolfinfire|#jerkdrivers|#AFD|#APDSWAT|\r\n#shooter|#HELPME|#fire|#thanksAFD\")))\r\n\r\n\r\n\r\nClassify Meaningful records: Apart from the Spam and Junk, the rest of emails would be classified into meaningful records, which could be received by the below code chunk.In this step, anti_join() function in dplyr package would be used.\r\n\r\n\r\nTypical_Chatter <- anti_join(mbdata1,junk,by=\"message\") \r\nTypical_Chatter <- anti_join(mbdata1,meaningful,by=\"message\")\r\n\r\n\r\n\r\nNow, all records in Microblog data have been labeled with responding class- Junk, Meanigful and Spam.\r\nNext, we add “class” as a new column to represent the label of every record.\r\n\r\n\r\njunk$class <- \"junk\"\r\nTypical_Chatter$class <- \"Typical_Chatter\"\r\nmeaningful$class <- \"meaningful\"\r\n\r\n\r\n\r\nUsing below code chunk, we combine Junk, Spam and Meaningful records into one dataframe which was renamed as data_classed. In this preprocessing step, the rbind function of dplry package would be used.\r\n\r\n\r\nmbdata_classed <- rbind(junk, Typical_Chatter, meaningful)\r\n\r\n\r\n\r\nIn the previous pre-processing step, we keep # as a tag to identify Junk, Spam and meaningful records. After records classifying, we move “#” in the tag using below code chunk.\r\n\r\n\r\nmbdata_classed$message <- str_replace_all(mbdata_classed$message,fixed(\"#\"),\"\")\r\n\r\n\r\n\r\n2.7 Data Tokenization and Word Counts\r\nAfter cleaning the text data, the next step is to segment sentence and count the occurrence of each word, to identify frequent words in records. The below code chunk shows how Multiple functions used to achieve this results:\r\nunnest_tokens() function from tidytext package is used to split the sentences into tokens,\r\nstop_words() is used to remove stop-words.\r\nstr_detect() is used to detect the presence or absence of a pattern in string.\r\nfilter() of dplyr package is used to subset a data frame, retaining all rows that satisfy the specified conditions.\r\n\r\n\r\nmbdata_classed_token <- mbdata_classed %>%\r\n  unnest_tokens(word, message) %>%\r\n  filter(str_detect(word, \"[a-z']$\"),\r\n         !word %in% stop_words$word,\r\n         !word %in% c(\"aliba\",\"abila\",\"rt\",\"homelandilluminations\"))\r\n\r\n\r\n\r\nThe most common words in entire dataset could be seen from below code chunk.\r\n\r\n\r\nmbdata_classed_token %>%\r\n  count(word,sort = TRUE) %>%\r\n  top_n(15) \r\n\r\n\r\n              word    n\r\n1         pokrally 1373\r\n2       kronosstar  931\r\n3              pok  494\r\n4        abilapost  412\r\n5             fire  397\r\n6            rally  300\r\n7           police  294\r\n8             life  210\r\n9           people  199\r\n10 centralbulletin  186\r\n11             apd  164\r\n12         grammar  157\r\n13         dancing  143\r\n14         success  141\r\n15         dolphin  130\r\n\r\n\r\n\r\nmbdata_classed_token %>%\r\n  count(word, sort = TRUE) %>%\r\n  filter(n > 140) %>%\r\n  mutate(word = reorder(word, n)) %>%\r\n  ggplot(aes(n, word, fill = word)) +\r\n  theme(legend.position = \"none\")+\r\n  geom_col() +\r\n  labs(y = NULL)\r\n\r\n\r\n\r\n\r\nGenerate the word cloud The importance of words can be illustrated as a word cloud as follow :\r\n\r\n\r\nset.seed(1234)\r\nwordcloud(words = mbdata_classed_token$word,\r\n          #freq = mbdata_classed_token$n,\r\n          min.freq = 10,\r\n          max.words = 200, \r\n          random.order=FALSE, rot.per=0.35,\r\n          colors=brewer.pal(8, \"Dark2\"))\r\n\r\n\r\n\r\n\r\n3. Data Visualization\r\nQuestion 1:\r\nUsing visual analytics, characterize the different types of content in the dataset. What distinguishes meaningful event reports from typical chatter from junk or spam?\r\n1.Visualizing word frequency as word cloud Firstly, we count words for three classes- Junk, Spam, Meaningful using the code chunk below, then the frequent words in tree record class could be seen.\r\n\r\n\r\ntoken_by_class <- mbdata_classed_token %>%\r\n  count(class,author, word, sort = TRUE) %>%\r\n  group_by(class) %>%\r\n  top_n(15) %>%\r\n  ungroup()\r\n\r\n\r\n\r\n\r\n\r\nset.seed(1234)\r\ntoken_by_class %>%\r\n  filter(n > 0) %>%\r\nggplot(aes(label = word,\r\n           size = n,\r\n           color= class))+\r\n  geom_text_wordcloud() +\r\n  theme_minimal() +\r\n  facet_wrap(~class, scales = \"free_y\") +\r\n  labs(x = \"Record Classification\")\r\n\r\n\r\n\r\n\r\nThe code chunk below uses bind_tf_idf() of tidytext to compute and bind the term frequency, inverse document frequency and ti-idf of a tidy text dataset to the dataset.\r\n\r\n\r\ntf_idf <- token_by_class %>%\r\n  bind_tf_idf(word,class, n) %>%\r\n  arrange(desc(tf_idf))\r\n\r\n\r\n\r\n2. Visualising tf-idf as interactive table\r\nTable below is an interactive table created by using datatable(). The DT table can be used to review the frequency, tf-idf of common words of three classes by selecting “class” in DT table.\r\n\r\n\r\nDT::datatable(tf_idf, filter = 'top') %>% \r\n  formatRound(columns = c('tf', 'idf', \r\n                          'tf_idf'), \r\n              digits = 3) %>%\r\n  formatStyle(0, \r\n              target = 'row', \r\n              lineHeight='25%')\r\n\r\n\r\n\r\n{\"x\":{\"filter\":\"top\",\"filterHTML\":\"<tr>\\n  <td><\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"character\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"integer\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none; position: absolute; width: 200px;\\\">\\n      <div data-min=\\\"8\\\" data-max=\\\"1257\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none; position: absolute; width: 200px;\\\">\\n      <div data-min=\\\"0.015429122468659\\\" data-max=\\\"0.404050144648024\\\" data-scale=\\\"15\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none; position: absolute; width: 200px;\\\">\\n      <div data-min=\\\"-0.693147180559946\\\" data-max=\\\"1.09861228866811\\\" data-scale=\\\"15\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n  <td data-type=\\\"number\\\" style=\\\"vertical-align: top;\\\">\\n    <div class=\\\"form-group has-feedback\\\" style=\\\"margin-bottom: auto;\\\">\\n      <input type=\\\"search\\\" placeholder=\\\"All\\\" class=\\\"form-control\\\" style=\\\"width: 100%;\\\"/>\\n      <span class=\\\"glyphicon glyphicon-remove-circle form-control-feedback\\\"><\\/span>\\n    <\\/div>\\n    <div style=\\\"display: none; position: absolute; width: 200px;\\\">\\n      <div data-min=\\\"-0.081217245398944\\\" data-max=\\\"0.163828235580831\\\" data-scale=\\\"15\\\"><\\/div>\\n      <span style=\\\"float: left;\\\"><\\/span>\\n      <span style=\\\"float: right;\\\"><\\/span>\\n    <\\/div>\\n  <\\/td>\\n<\\/tr>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\"],[\"junk\",\"Typical_Chatter\",\"junk\",\"junk\",\"Typical_Chatter\",\"meaningful\",\"meaningful\",\"Typical_Chatter\",\"Typical_Chatter\",\"meaningful\",\"junk\",\"Typical_Chatter\",\"junk\",\"Typical_Chatter\",\"meaningful\",\"junk\",\"Typical_Chatter\",\"Typical_Chatter\",\"Typical_Chatter\",\"meaningful\",\"meaningful\",\"meaningful\",\"Typical_Chatter\",\"Typical_Chatter\",\"meaningful\",\"junk\",\"meaningful\",\"junk\",\"meaningful\",\"junk\",\"junk\",\"junk\",\"junk\",\"meaningful\",\"Typical_Chatter\",\"meaningful\",\"junk\",\"meaningful\",\"Typical_Chatter\",\"Typical_Chatter\",\"junk\",\"Typical_Chatter\",\"Typical_Chatter\",\"meaningful\",\"meaningful\",\"junk\",\"meaningful\"],[\"KronosQuoth\",\"megaMan\",\"KronosQuoth\",\"KronosQuoth\",\"SaveOurWildlands\",\"CentralBulletin\",\"megaMan\",\"POK\",\"POK\",\"AbilaPost\",\"Clevvah4Evah\",\"POK\",\"Clevvah4Evah\",\"megaMan\",\"AbilaPost\",\"KronosQuoth\",\"megaMan\",\"POK\",\"Viktor-E\",\"truccotrucco\",\"KronosStar\",\"KronosStar\",\"NewsOnlineToday\",\"Viktor-E\",\"choconibbs\",\"KronosQuoth\",\"HomelandIlluminations\",\"KronosQuoth\",\"megaMan\",\"KronosQuoth\",\"KronosQuoth\",\"KronosQuoth\",\"KronosQuoth\",\"AbilaFireDept\",\"POK\",\"FriendsOfKronos\",\"KronosQuoth\",\"gardener4958\",\"FriendsOfKronos\",\"megaMan\",\"KronosQuoth\",\"FriendsOfKronos\",\"POK\",\"footfingers\",\"ourcountryourrights\",\"Clevvah4Evah\",\"FriendsOfKronos\"],[\"pokrally\",\"tag\",\"kronosstar\",\"life\",\"sow.kronos\",\"centralbulletin\",\"van\",\"newman\",\"dr\",\"abilapost\",\"rally\",\"sylvia\",\"grammar\",\"ben\",\"apd\",\"success\",\"police\",\"jakab\",\"e.kronos\",\"standoff\",\"dancingdolphinfire\",\"kronosstar\",\"newsonline\",\"viktor\",\"pokrally\",\"time\",\"fire\",\"person\",\"tag\",\"day\",\"failure\",\"successful\",\"world\",\"fire\",\"viktor\",\"terrorists\",\"living\",\"abilapost\",\"terrorists\",\"people\",\"people\",\"pok\",\"pok\",\"pok\",\"pok\",\"pok\",\"pok\"],[1257,66,595,202,15,30,30,14,13,71,162,12,153,11,22,138,10,10,10,21,20,49,8,19,36,69,26,58,24,53,53,52,52,22,10,21,48,20,8,8,66,10,10,22,23,153,58],[0.404050144648023,0.282051282051282,0.191256830601093,0.0649308903889425,0.0641025641025641,0.0606060606060606,0.0606060606060606,0.0598290598290598,0.0555555555555556,0.143434343434343,0.0520732883317261,0.0512820512820513,0.0491803278688525,0.047008547008547,0.0444444444444444,0.0443587270973963,0.0427350427350427,0.0427350427350427,0.0427350427350427,0.0424242424242424,0.0404040404040404,0.098989898989899,0.0341880341880342,0.0811965811965812,0.0727272727272727,0.0221793635486982,0.0525252525252525,0.0186435229829637,0.0484848484848485,0.0170363227258116,0.0170363227258116,0.0167148826743812,0.0167148826743812,0.0444444444444444,0.0427350427350427,0.0424242424242424,0.0154291224686596,0.0404040404040404,0.0341880341880342,0.0341880341880342,0.0212150433944069,0.0427350427350427,0.0427350427350427,0.0444444444444444,0.0464646464646465,0.0491803278688525,0.117171717171717],[0.405465108108164,0.405465108108164,0.405465108108164,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,0.405465108108164,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,0.405465108108164,1.09861228866811,0.405465108108164,0.405465108108164,1.09861228866811,0.405465108108164,1.09861228866811,0.405465108108164,1.09861228866811,1.09861228866811,1.09861228866811,1.09861228866811,0.405465108108164,0.405465108108164,0.405465108108164,1.09861228866811,0.405465108108164,0.405465108108164,0.405465108108164,0.405465108108164,-0.693147180559945,-0.693147180559945,-0.693147180559945,-0.693147180559945,-0.693147180559945,-0.693147180559945],[0.16382823558083,0.114361953568969,0.077547971496097,0.0713338740954543,0.0704238646582122,0.0665825629495824,0.0665825629495824,0.0657289403476647,0.0610340160371172,0.0581576215670296,0.057208354472592,0.0563390917265697,0.054030112557448,0.0516441674160223,0.0488272128296938,0.0487330426988747,0.0469492431054748,0.0469492431054748,0.0469492431054748,0.0466077940647077,0.0443883752997216,0.0401369500955557,0.0375593944843798,0.0329223805728851,0.0294883714987756,0.0243665213494373,0.0212971571935601,0.0204820034531502,0.0196589143325171,0.0187163135002925,0.0187163135002925,0.0183631755097209,0.0183631755097209,0.018020671471474,0.0173275687225711,0.0172015500409524,0.0169506235474347,0.0163824286104309,0.0138620549780569,0.0138620549780569,0.00860195986343261,-0.0296216743829036,-0.0296216743829036,-0.0308065413582198,-0.0322068386926843,-0.0340892056013088,-0.0812172453989431]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>class<\\/th>\\n      <th>author<\\/th>\\n      <th>word<\\/th>\\n      <th>n<\\/th>\\n      <th>tf<\\/th>\\n      <th>idf<\\/th>\\n      <th>tf_idf<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"targets\":5,\"render\":\"function(data, type, row, meta) { return DTWidget.formatRound(data, 3, 3, \\\",\\\", \\\".\\\"); }\"},{\"targets\":6,\"render\":\"function(data, type, row, meta) { return DTWidget.formatRound(data, 3, 3, \\\",\\\", \\\".\\\"); }\"},{\"targets\":7,\"render\":\"function(data, type, row, meta) { return DTWidget.formatRound(data, 3, 3, \\\",\\\", \\\".\\\"); }\"},{\"className\":\"dt-right\",\"targets\":[4,5,6,7]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false,\"orderCellsTop\":true,\"rowCallback\":\"function(row, data) {\\nvar value=data[0]; $(row).css({'line-height':'25%'});\\n}\"}},\"evals\":[\"options.columnDefs.0.render\",\"options.columnDefs.1.render\",\"options.columnDefs.2.render\",\"options.rowCallback\"],\"jsHooks\":[]}\r\n3. Visualising tf-idf within Three Records Classes\r\nLeveraging facet bar charts to plot the tf-idf values of three class - Junk, Spam, Meaningful records.\r\n\r\n\r\ntf_idf %>%\r\n  group_by(class) %>%\r\n  slice_max(tf_idf, \r\n            n = 12) %>%\r\n  ungroup() %>%\r\n  mutate(word = reorder(word, \r\n                        tf_idf)) %>%\r\n  ggplot(aes(tf_idf, \r\n             word, \r\n             fill = class)) +\r\n  geom_col(show.legend = FALSE) +\r\n  facet_wrap(~ class, \r\n             ncol = 2,\r\n             scales = \"free\") +\r\n  labs(x = \"tf-idf\", \r\n       y = NULL,\r\n       title = \"15 most frequent words in Three Record Classes\") \r\n\r\n\r\n\r\n\r\nexplore whether there is relationship between records length and classes.\r\nexplore whether there is relationship between records length and location. (whether records with location is more likely to be meaningful records)\r\n** Visualizing correlation as a network\r\nTo explore the relationship between three classes in network graph, we count the number of times that two words appear within the same document, or to see how correlated they are.\r\nMost operations for finding pairwise counts or correlations need to turn the data into a wide matrix first. we would use widyr package ‘casts’ a tidy datasets into a wide matrix, performs an operation such as a correlation on it, then re-tidies the result.\r\nIn this code chunk below, pairwise_cor() of widyr package is used to compute the correlation between newsgroup based on the common words found.\r\n\r\n\r\nclass_cors <- token_by_class %>%\r\n  pairwise_cor(author, \r\n               word, \r\n               n, \r\n               sort = TRUE)\r\n\r\n\r\n\r\n\r\n\r\nset.seed(1234)\r\nclass_cors %>%\r\n  filter(correlation > .01) %>%\r\n  graph_from_data_frame() %>%\r\n  ggraph(layout = \"fr\") +\r\n  geom_edge_link(aes(alpha = correlation, \r\n                     width = correlation)) +\r\n  geom_node_point(size = 3, \r\n                  color = \"lightblue\") +\r\n  geom_node_text(aes(label = name),\r\n                 color = \"red\",\r\n                 repel = TRUE) +\r\n  theme_void() +\r\n  labs(title = \"Network of Microblog authors\") \r\n\r\n\r\n\r\n\r\n4.Visualising count of latitude and longitude by classification as bar chart\r\n\r\n\r\nmbdata_classed %>%\r\n  select(class,latitude, longitude) %>%\r\n  filter(latitude >0, longitude >0 ) %>%\r\n  group_by(class) %>%\r\n  summarise(total_count= n()) %>%\r\nggplot(aes(x=class, y=total_count)) +\r\n  geom_bar(aes(fill= class),stat=\"identity\")+\r\n  labs(title=\"Count of Latitude and Longtitude by Classification\", x=\"Class\", y=\"Count of Latitude and Longtitude\") +\r\n  geom_text(aes(label=total_count), vjust=-0.3, size=3.5)+\r\n  theme_minimal()\r\n\r\n\r\n\r\n\r\n3. Visualizing Word Length within Three Records Classes\r\nTo explore the Word Length within three records Classes, we caculate the length of every record and add a new column named “length” in mbdata_classed. In the code chunk below, strsplit() of stringr was used to get the word length.\r\n\r\n\r\nmbdata_classed$length <- sapply(mbdata_classed$message, function(x) length(unlist(strsplit(as.character(x), \"\\\\W+\"))))\r\n\r\n\r\n\r\nA boxplot can be used to complement the visual discovery of word length distribution by classification. In this code code chunk below, boxplot of ggplot2 is used to plot a static boxplot.\r\n\r\n\r\nggplot(data = mbdata_classed, aes(x=as.character(class), y=length)) +\r\n    geom_boxplot(aes(fill= class)) +\r\n    labs(title=\"Word Length Distribution by Classification\", x=\"Class\", y=\"Word Length\")\r\n\r\n\r\n\r\n\r\nQuestion 2\r\nUse visual analytics to represent and evaluate how the level of the risk to the public evolves over the course of the evening. Consider the potential consequences of the situation and the number of people who could be affected. Please limit your answer to 10 images and 1000 words.\r\n\r\n\r\n#fire_count <- data_classed_token %>% \r\n#  filter(str_detect(word,\"fire|Dancing Dolphin Department\")) \r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-14-the-sharpe-ratio/the-sharpe-ratio_files/figure-html5/unnamed-chunk-17-1.png",
    "last_modified": "2021-07-22T16:56:23+08:00",
    "input_file": "the-sharpe-ratio.knit.md"
  }
]
